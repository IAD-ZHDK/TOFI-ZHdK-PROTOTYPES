(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{"8z7e":function(e,t){},ERIh:function(e,t,s){"use strict";s("8z7e");var o=r(s("I335"));s("5heZ");var i=r(s("pbXo")),n=r(s("m2LD"));function r(e){return e&&e.__esModule?e:{default:e}}var a=document.getElementById("p5-container");new o.default((function(e){var t=void 0,o=[],r=!1,a=[],l=0,h=[],u=[60,62,64,67,69,72,74],c=[190.43,166.42,50.09,30.9,23.4],f=.7*e.windowWidth,d=!1,g=0,v=s("iZKT");function p(){a=[];for(var t=0;t<4;t++)a.push(e.floor(e.random(5)))}function w(){l<4?(function(){for(var e=0;e<5;e++)o[e].release()}(),o[a[l]].trigger(),setTimeout(w,700),l++):(r=!1,l=0,g=1)}function m(e){a.length>0&&(e===a[l]?(console.log("correct_"+l+" of"+a.length),++l>=4&&setTimeout(V,500)):setTimeout(C,1e3))}function V(){console.log("sequence won"),l=0,p(),g=2}function C(){l=0,console.log("repeat:"+a),g=2}function y(){var t=(e.windowWidth-f)/2,s=f/2.5,i=f/5;t+=i/2;for(var r=0;r<5;r++)o[r]=new n.default(e,u[r],i*r+t,e.windowHeight/2,s,c[r])}e.gui=new v.GUI,e.guiObject={factor:.5,threshold:22e3},e.preload=function(){e.loadFont("static/fonts/inconsolata.otf")},e.setup=function(){e.createCanvas(e.windowWidth,e.windowHeight),e.colorMode(e.HSB),e.blendMode(e.SCREEN),t=new i.default,e.textSize(e.width/100),e.fill(255),e.noStroke(),e.textAlign(e.CENTER,e.CENTER);var s=e.gui.addFolder("filter (weighted moving average)");s.add(e.guiObject,"factor",0,.99),s.add(e.guiObject,"threshold",0,5e4),s.open();for(var o=2;o<8;o++)h.push(t.chanelNames[o+1])},e.draw=function(){e.clear(),e.background(0,20,10),1===g?function(){t.setFilter(e.guiObject.factor);for(var s=[],i=2;i<t.sensorValues.length-1;i++)s.push(t.sensorValues[i+1]);for(var n=0;n<5;n++)o[n].draw(),!1===d?s[n]>=e.guiObject.threshold?o[n].trigger()&&m(n):s[n]<e.guiObject.threshold&&o[n].release():o[n].checkMouseOver()?o[n].trigger()&&m(n):o[n].release(),e.text(s[n],o[n].x,e.height-50),e.text(h[n],o[n].x,e.height-30)}():2===g?(e.background(0,50,10),function(){0===a.length&&p(),!1===r&&(r=!0,setTimeout(w,700));for(var e=0;e<5;e++)o[e].draw()}()):0===g&&(e.translate(e.windowWidth/2,e.windowHeight/2),e.text("No BLE Connection, click anywhere to pair BLE device",0,0),t.isConnected&&(g=1))},e.touchStarted=function(){0===g?(y(),t.connectAndStartNotify(),g=1):e.mouseY>e.height/2&&1===g&&(g=2)},e.windowResized=function(){e.resizeCanvas(e.windowWidth,e.windowHeight)},e.keyPressed=function(){y(),d=!0,g=1}}),a)},m2LD:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(s("iCc5")),i=r(s("V7oC")),n=r(s("I335"));function r(e){return e&&e.__esModule?e:{default:e}}s("5heZ");var a=function(){function e(t,s,i,r,a,l){(0,o.default)(this,e),this.p=t,this.midiNotes=s,this.NoteFlag=!1,this.envelope=new n.default.Envelope,this.envelope.setADSR(.2,.35,.04,3),this.envelope.setRange(.6,0),this.oscillator=new n.default.Oscillator("sine"),this.HSBColor=l,this.oscillator.amp(this.envelope),this.freq=this.p.midiToFreq(this.midiNotes),this.oscillator.freq(this.freq),this.oscillator.start(),this.diameter=a,this.amp=0,this.x=i,this.y=r}return(0,i.default)(e,[{key:"draw",value:function(){var e=0;if(this.amp>5){this.amp*=.99;var t=this.p.millis()*(this.freq/1e3)*(2*this.p.PI);e=this.p.sin(this.p.radians(t))*this.amp}else this.amp=5;this.p.fill(this.HSBColor,255,this.amp),this.p.noStroke(),this.p.ellipse(this.x,this.y+e,this.diameter,this.diameter)}},{key:"checkMouseOver",value:function(){return this.p.dist(this.x,this.p.height/2,this.p.mouseX,this.p.mouseY)<=this.diameter/4}},{key:"trigger",value:function(){if(!1===this.NoteFlag)return this.NoteFlag=!0,this.envelope.play(),this.amp=100,!0}},{key:"release",value:function(){!0===this.NoteFlag&&(this.NoteFlag=!1)}}]),e}();t.default=a},pbXo:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(s("iCc5")),i=r(s("V7oC")),n=(r(s("I335")),r(s("pvlQ")));function r(e){return e&&e.__esModule?e:{default:e}}var a=void 0,l=function(){function e(){(0,o.default)(this,e),!(!window.chrome||!window.chrome.webstore&&!window.chrome.runtime)||window.alert("BLE may not work in your browser. Use Chrome or check for a list of compatible browsers here: https://developer.mozilla.org/en-US/docs/Web/API/Web_Bluetooth_API"),console.log("looking for: A22A0001-AD0B-4DF2-A4E2-1745CBB4dCEE"),this.serviceUuid="A22A0001-AD0B-4DF2-A4E2-1745CBB4dCEE",this.myBLE=new n.default,this.isConnected=!1,this.sensorValues=[],this.sensorValues[0]=0,this.sensorValues[1]=0,this.sensorValues[2]=0,this.sensorValues[3]=0,this.sensorValues[4]=0,this.sensorValues[5]=0,this.sensorValues[6]=0,this.sensorValues[7]=0,this.chanelNames=["Battery","Reference","Ch 6","Ch 5","Ch 4","Ch 3","Ch 2","Ch 1"],this.filtering=!0,this.factor=.5,a=this}return(0,i.default)(e,[{key:"connectAndStartNotify",value:function(){this.myBLE.connect(this.serviceUuid,this.gotCharacteristics)}},{key:"gotCharacteristics",value:function(e,t){if(e)console.log("error: ",e);else{console.log(t[0]),console.log("check connection."),a.isConnected=a.myBLE.isConnected(),a.myBLE.onDisconnected(a.onDisconnected);for(var s=0;s<t.length;s++)if(0===s){var o=t[s];a.myBLE.startNotifications(o,a.handleSensor,"custom"),console.log("characteristics: 1")}else 1===s?console.log("characteristics: 2"):2===s?console.log("characteristics: 3"):console.log("characteristic doesn't match.")}}},{key:"onDisconnected",value:function(){console.log("Device was disconnected."),this.isConnected=!1}},{key:"setFilter",value:function(e){this.factor=e,this.factor<=.01?this.filtering=!1:this.filtering=!0}},{key:"handleSensor",value:function(e){if(a.filtering){var t=a.factor;a.sensorValues[0]=Math.floor(a.sensorValues[0]*t),a.sensorValues[1]=Math.floor(a.sensorValues[1]*t),a.sensorValues[2]=Math.floor(a.sensorValues[2]*t),a.sensorValues[3]=Math.floor(a.sensorValues[3]*t),a.sensorValues[4]=Math.floor(a.sensorValues[4]*t),a.sensorValues[5]=Math.floor(a.sensorValues[5]*t),a.sensorValues[6]=Math.floor(a.sensorValues[6]*t),a.sensorValues[7]=Math.floor(a.sensorValues[7]*t),a.sensorValues[0]+=Math.floor(e.getUint16(0,!0)*(1-t)),a.sensorValues[1]+=Math.floor(e.getUint16(2,!0)*(1-t)),a.sensorValues[2]+=Math.floor(e.getUint16(4,!0)*(1-t)),a.sensorValues[3]+=Math.floor(e.getUint16(6,!0)*(1-t)),a.sensorValues[4]+=Math.floor(e.getUint16(8,!0)*(1-t)),a.sensorValues[5]+=Math.floor(e.getUint16(10,!0)*(1-t)),a.sensorValues[6]+=Math.floor(e.getUint16(12,!0)*(1-t)),a.sensorValues[7]+=Math.floor(e.getUint16(14,!0)*(1-t))}else a.sensorValues[0]=e.getUint16(0,!0),a.sensorValues[1]=e.getUint16(2,!0),a.sensorValues[2]=e.getUint16(4,!0),a.sensorValues[3]=e.getUint16(6,!0),a.sensorValues[4]=e.getUint16(8,!0),a.sensorValues[5]=e.getUint16(10,!0),a.sensorValues[6]=e.getUint16(12,!0),a.sensorValues[7]=e.getUint16(14,!0)}}]),e}();t.default=l}},[["ERIh",1,2]]]);
//# sourceMappingURL=0.261725071aa76a994b77.js.map